<!DOCTYPE html>
<html>
<head>
  <title>Dashboard Lily Bot</title>
  <link rel="stylesheet" href="style.css">
  <script type="module" src="supabase.js"></script>
</head>
<body>
  <div class="dashboard">
    <div class="sidebar">
      <div id="userProfile"></div>
      <nav>
        <a href="#" class="active">🏠 Início</a>
        <a href="#">⚙️ Configurações</a>
        <button id="logoutBtn">🚪 Sair</button>
      </nav>
    </div>
    
    <div class="main-content">
      <h1>🛠️ Controles do Bot</h1>
      <div class="controls">
        <button class="control-btn">▶️ Iniciar</button>
        <button class="control-btn">⏸ Pausar</button>
      </div>
    </div>
  </div>

  <script type="module">
    import { supabase } from './supabase.js'

    // 1. Verifica sessão
    const { data: { user } } = await supabase.auth.getUser()
    
    if (!user) {
      window.location.href = '/'
      return
    }

    // 2. Exibe perfil
    document.getElementById('userProfile').innerHTML = `
      <img src="${user.user_metadata.avatar_url}" class="user-avatar">
      <h2>${user.user_metadata.full_name}</h2>
      <p>${user.email}</p>
    `

    // 3. Logout
    document.getElementById('logoutBtn').addEventListener('click', async () => {
      await supabase.auth.signOut()
      window.location.href = '/'
    })
  </script>
</body>
</html>
