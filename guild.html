<!DOCTYPE html>
<html lang="pt-BR">
<head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Dashboard do Servidor</title>
<style>
  body{margin:0;padding:20px;font-family:sans-serif;background:#121212;color:#fff;}
  h1{text-align:center;}
  .profile{display:flex;align-items:center;gap:10px;margin-bottom:20px;}
  .profile img{width:60px;height:60px;border-radius:50%;}
  .guild{background:#1E1E1E;padding:15px;border-radius:8px;margin-bottom:10px;cursor:pointer;}
  form{background:#1E1E1E;padding:20px;border-radius:8px;max-width:400px;margin:auto;}
  label{display:flex;justify-content:space-between;margin-bottom:15px;}
  select,button{padding:8px;border:none;border-radius:6px;}
  button{width:100%;background:#6A1B9A;color:#fff;cursor:pointer;}
</style>
</head>
<body>
  <div id="main"></div>
<script>
  const data = JSON.parse(localStorage.getItem('lilyData') || '{}');
  const main = document.getElementById('main');
  if(!data.user){ main.innerHTML='<p>Você não está logado. <a href="/">Login</a></p>'; throw ''; }

  main.innerHTML = `
    <div class="profile">
      <img src="${data.user.avatarUrl}" alt="Avatar"/>
      <div><h1>${data.user.username}#${data.user.discriminator}</h1></div>
    </div>
    <h2>Servidores administrados</h2>
    <div id="list"></div>
    <h2>Configurações gerais</h2>
    <form id="form">
      <label>Tickets: <select id="tickets"><option value="on">On</option><option value="off">Off</option></select></label>
      <label>Logs (entrada/saída): <select id="logs"><option value="on">On</option><option value="off">Off</option></select></label>
      <label>Música: <select id="music"><option value="on">On</option><option value="off">Off</option></select></label>
      <button type="submit">Salvar configurações</button>
    </form>
  `;

  const list = document.getElementById('list');
  data.guilds.forEach(g => {
    const div = document.createElement('div');
    div.className = 'guild';
    div.textContent = g.name;
    list.appendChild(div);
  });

  const form = document.getElementById('form');
  form.addEventListener('submit', e => {
    e.preventDefault();
    const cfg = {
      tickets: document.getElementById('tickets').value,
      logs: document.getElementById('logs').value,
      music: document.getElementById('music').value
    };
    alert('Configurações salvas:\n' + JSON.stringify(cfg,null,2));
  });
</script>
</body>
</html>
